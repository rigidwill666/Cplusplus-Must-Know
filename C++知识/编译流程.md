# C++ 编译流程
C++ 源代码在变成可执行程序的过程中，会经历四个主要阶段：**预处理、编译、汇编、链接**。
## 预处理 -E
作用：处理头文件包含 (#include)、宏替换 (#define)、条件编译 (#ifdef) 等预处理指令，生成纯 C++ 代码（去掉宏和预处理指令）。
~~~
g++ -E main.cpp -o main.i
~~~
## 编译 -S
作用：把预处理后的 C++ 源代码（main.i）转换成 汇编代码（main.s）。
~~~
g++ -S main.i -o main.s
~~~
> 如何优化编译？：
>
> 1. 只重新编译修改的文件;2. 使用 Makefile 自动化编译;3. 启用优化选项，使用 -O2（较高优化，兼顾速度和编译时间） 或 -O3 进行优化（最高优化，可能会导致代码体积变大）。
## 汇编 -c
作用：将汇编代码 (main.s) 转换为 机器码（二进制格式的 .o 文件）。
~~~
g++ -c main.s -o main.o
~~~
## 链接 默认g++
作用：将多个目标文件（.o 文件）和标准库 (libc、libstdc++) 连接在一起，生成最终的可执行文件 (a.out 或 main)。
~~~
g++ main.o -o main
~~~
