# åŸºç¡€æ¦‚å¿µ
è¿›ç¨‹æ˜¯ç¨‹åºåœ¨**è¿è¡Œæ—¶çš„å®ä¾‹**ï¼Œæ˜¯**æ“ä½œç³»ç»Ÿèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½**ã€‚æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ã€æ–‡ä»¶æè¿°ç¬¦ã€æ•°æ®å’Œä»£ç ç­‰èµ„æºã€‚è¿›ç¨‹é—´**ç›¸äº’ç‹¬ç«‹**ï¼Œä½†å¯ä»¥é€šè¿‡è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰è¿›è¡Œæ•°æ®äº¤æ¢ã€‚

çº¿ç¨‹æ˜¯è¿›ç¨‹ä¸­çš„**æ‰§è¡Œå•å…ƒ**ï¼Œæ˜¯**æ“ä½œç³»ç»Ÿè°ƒåº¦çš„åŸºæœ¬å•ä½**ã€‚ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹å…±äº«è¿›ç¨‹çš„å†…å­˜ã€æ•°æ®ã€æ–‡ä»¶ç­‰èµ„æºï¼Œä½†æœ‰è‡ªå·±ç‹¬ç«‹çš„**æ ˆå’Œå¯„å­˜å™¨**ã€‚
> ä¸åŒçº¿ç¨‹çš„æ ˆæ˜¯å¦ç‹¬ç«‹ï¼Ÿ:
>
> ä¸åŒçº¿ç¨‹çš„æ ˆæ˜¯ç‹¬ç«‹çš„ï¼Œç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡ã€å‡½æ•°å‚æ•°ã€è¿”å›åœ°å€ã€å¯„å­˜å™¨çŠ¶æ€ç­‰ã€‚çº¿ç¨‹åˆ›å»ºæ—¶ï¼Œç³»ç»Ÿä¼šä¸ºå…¶åˆ†é…ç‹¬ç«‹çš„æ ˆï¼ˆåœ¨ Linux ä¸Šé€šå¸¸é»˜è®¤ 8MBï¼‰ï¼Œæ ˆåŒºæ˜¯è¿ç»­çš„å†…å­˜å—ï¼Œå…¶å¤§å°åœ¨çº¿ç¨‹åˆ›å»ºæ—¶ç¡®å®šï¼Œä¸å¯åŠ¨æ€æ‰©å±•ã€‚
>
> çº¿ç¨‹é—´å…±äº«å †å†…å­˜æ—¶éœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿï¼š
>
> å †ï¼ˆHeapï¼‰æ˜¯æ‰€æœ‰çº¿ç¨‹å…±äº«çš„ï¼Œä½†å¤šçº¿ç¨‹è®¿é—®æ—¶éœ€è¦æ³¨æ„æ•°æ®ç«äº‰ï¼Œéœ€è¦ä½¿ç”¨åŒæ­¥æœºåˆ¶ã€‚
# åŒºåˆ«
## èµ„æº
è¿›ç¨‹æœ‰ç‹¬ç«‹èµ„æºï¼ˆå†…å­˜ã€æ–‡ä»¶ã€åœ°å€ç©ºé—´ç­‰ï¼‰ï¼Œä¸€ä¸ªå´©æºƒä¸å½±å“å…¶ä»–è¿›ç¨‹ï¼›çº¿ç¨‹å…±äº«è¿›ç¨‹èµ„æºä¹Ÿå…±äº«è¿›ç¨‹åœ°å€ç©ºé—´ï¼Œä¸€ä¸ªçº¿ç¨‹å´©æºƒå¯èƒ½å½±å“æ•´ä¸ªè¿›ç¨‹ã€‚
## åˆ›å»º/é”€æ¯
è¿›ç¨‹åˆ›å»ºå’Œé”€æ¯å¼€é”€å¤§ï¼ˆæ¶‰åŠå†…å­˜åˆ†é…ã€æ–‡ä»¶æè¿°ç¬¦å¤åˆ¶ï¼‰ï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢æˆæœ¬è¾ƒé«˜ï¼›çº¿ç¨‹åˆ›å»ºå’Œé”€æ¯å¼€é”€å°ï¼ˆä»…éœ€æ ˆç©ºé—´ï¼‰ï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢æ›´å¿«ã€‚
## é€šä¿¡
è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰å¤æ‚ï¼Œå¦‚å…±äº«å†…å­˜ã€ç®¡é“ã€æ¶ˆæ¯é˜Ÿåˆ—ã€å¥—æ¥å­—ç­‰æœºåˆ¶ï¼›çº¿ç¨‹å¯ç›´æ¥å…±äº«å†…å­˜ï¼Œä½†éœ€åŒæ­¥æœºåˆ¶
# ä½¿ç”¨åœºæ™¯
âœ… ä½¿ç”¨è¿›ç¨‹çš„æƒ…å†µï¼š

éœ€è¦**é«˜å¯é æ€§**ï¼Œé¿å…ä¸€ä¸ªä»»åŠ¡å´©æºƒå½±å“å…¶ä»–ä»»åŠ¡ï¼ˆå¦‚æµè§ˆå™¨çš„ä¸åŒæ ‡ç­¾é¡µä½¿ç”¨ä¸åŒè¿›ç¨‹ï¼‰ï¼›

éœ€è¦**ç‹¬ç«‹çš„èµ„æº**ï¼Œå¦‚ä¸åŒç”¨æˆ·çš„ä»»åŠ¡ï¼ˆå¦‚æ“ä½œç³»ç»Ÿçš„å¤šç”¨æˆ·ç¯å¢ƒï¼‰ï¼›

**åˆ†å¸ƒå¼è®¡ç®—**ï¼Œä¸åŒè¿›ç¨‹å¯åœ¨ä¸åŒæœºå™¨ä¸Šè¿è¡Œï¼ˆå¦‚å¤§è§„æ¨¡æ•°æ®å¤„ç†ï¼‰ã€‚

âœ… ä½¿ç”¨çº¿ç¨‹çš„æƒ…å†µï¼š

éœ€è¦**é«˜æ•ˆå¹¶å‘**ï¼Œå¤šä¸ªä»»åŠ¡éœ€è¦å…±äº«å¤§é‡æ•°æ®ï¼ˆå¦‚ Web æœåŠ¡å™¨çš„è¯·æ±‚å¤„ç†ï¼‰ï¼›

ä»»åŠ¡ä¹‹é—´éœ€è¦é¢‘ç¹é€šä¿¡ï¼ˆå¦‚å¤šçº¿ç¨‹ä¸‹è½½åŠ é€Ÿï¼‰ï¼›

è®¡ç®—å¯†é›†å‹ä»»åŠ¡ï¼Œå¯ä»¥åˆ©ç”¨å¤šæ ¸ CPU è¿›è¡Œ**å¹¶è¡Œè®¡ç®—**ï¼ˆå¦‚æ·±åº¦å­¦ä¹ çš„è®¡ç®—åŠ é€Ÿï¼‰ã€‚
> çº¿ç¨‹æ± ï¼Ÿï¼š
>
> çº¿ç¨‹æ± æ˜¯ä¸€ç§å¤šçº¿ç¨‹å¤„ç†å½¢å¼ï¼Œå®ƒé¢„å…ˆåˆ›å»ºä¸€å®šæ•°é‡çš„çº¿ç¨‹ï¼Œå½“æœ‰ä»»åŠ¡åˆ°æ¥æ—¶ï¼Œä»çº¿ç¨‹æ± ä¸­è·å–ä¸€ä¸ªç©ºé—²çº¿ç¨‹æ¥æ‰§è¡Œè¯¥ä»»åŠ¡ï¼Œä»»åŠ¡å®Œæˆåçº¿ç¨‹ä¸ä¼šé”€æ¯ï¼Œè€Œæ˜¯è¿”å›çº¿ç¨‹æ± ç­‰å¾…ä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚
# è¡¥å……
## åˆ›å»ºçº¿ç¨‹æ–¹å¼
### std::threadï¼ˆC++11 æ ‡å‡†åº“çº¿ç¨‹ï¼‰
é€‚ç”¨äºå¤§å¤šæ•°ç°ä»£ C++ å¤šçº¿ç¨‹ç¼–ç¨‹åœºæ™¯ï¼Œè·¨å¹³å°ï¼Œæ¨èä½¿ç”¨ã€‚
~~~
#include <iostream>
#include <thread>
void threadFunction() {
    std::cout << "Thread running..." << std::endl;
}
int main() {
    std::thread t(threadFunction); // åˆ›å»ºçº¿ç¨‹
    t.join(); // ç­‰å¾…çº¿ç¨‹æ‰§è¡Œå®Œæˆï¼ˆé˜»å¡ï¼‰
    return 0;
}
~~~
### pthreadï¼ˆPOSIX çº¿ç¨‹ï¼Œé€‚ç”¨äºLinux/Unixï¼‰
é€‚ç”¨äº Linux/Unixï¼Œè·¨å¹³å°æ€§è¾ƒå·®ï¼ˆWindows éœ€è¦ pthread-win32ï¼‰ã€‚
~~~
#include <iostream>
#include <pthread.h>
void* threadFunction(void* arg) {
    std::cout << "Thread running..." << std::endl;
    return nullptr;
}
int main() {
    pthread_t thread;
    pthread_create(&thread, nullptr, threadFunction, nullptr); // åˆ›å»ºçº¿ç¨‹
    pthread_join(thread, nullptr); // ç­‰å¾…çº¿ç¨‹æ‰§è¡Œå®Œæ¯•
    return 0;
}
~~~
### CreateThreadï¼ˆWindows API çº¿ç¨‹ï¼‰
ä»…é€‚ç”¨äº Windowsï¼Œæ— æ³•è·¨å¹³å°ã€‚
~~~
#include <windows.h>
#include <iostream>
DWORD WINAPI threadFunction(LPVOID lpParam) {
    std::cout << "Thread running..." << std::endl;
    return 0;
}
int main() {
    HANDLE hThread = CreateThread(nullptr, 0, threadFunction, nullptr, 0, nullptr);
    WaitForSingleObject(hThread, INFINITE); // ç­‰å¾…çº¿ç¨‹ç»“æŸ
    CloseHandle(hThread);
    return 0;
}
~~~
### std::asyncï¼ˆå¼‚æ­¥ä»»åŠ¡ï¼‰
é€‚ç”¨äºéœ€è¦å¼‚æ­¥ä»»åŠ¡çš„åœºæ™¯ï¼Œæ¯”å¦‚**è®¡ç®—å¯†é›†å‹ä»»åŠ¡**ï¼Œä½†ä¸é€‚ç”¨äºé•¿æœŸè¿è¡Œçš„åå°çº¿ç¨‹ï¼Œè·¨å¹³å°ã€‚
~~~
#include <iostream>
#include <future>
int asyncFunction() {
    return 42;
}
int main() {
    std::future<int> result = std::async(std::launch::async, asyncFunction);
    std::cout << "Result: " << result.get() << std::endl; // ç­‰å¾…ä»»åŠ¡å®Œæˆ
    return 0;
}
~~~
## è¿›ç¨‹è°ƒåº¦ç®—æ³•
### éæŠ¢å å¼è°ƒåº¦
è¿›ç¨‹ä¸€æ—¦è·å¾— CPU æ§åˆ¶æƒï¼Œå°±ä¸ä¼šè¢«æ‰“æ–­ï¼Œç›´åˆ°å®ƒä¸»åŠ¨æ”¾å¼ƒï¼ˆå¦‚ç­‰å¾… I/Oï¼‰ã€‚

1. å…ˆæ¥å…ˆæœåŠ¡-FCFS

è°å…ˆåˆ°å°±å…ˆæ‰§è¡Œ

ä¼˜ç‚¹ï¼šç®€å•ï¼Œå…¬å¹³

ç¼ºç‚¹ï¼šå¯èƒ½å¯¼è‡´é•¿ä½œä¸šé˜»å¡çŸ­ä½œä¸š

é€‚ç”¨äºæ‰¹å¤„ç†ç³»ç»Ÿ

2. æœ€çŸ­ä½œä¸šä¼˜å…ˆ-SJF

è°çš„æ‰§è¡Œæ—¶é—´çŸ­è°å…ˆæ‰§è¡Œ

ä¼˜ç‚¹ï¼šå¹³å‡ç­‰å¾…æ—¶é—´æœ€çŸ­ï¼ˆ**ç†è®ºæœ€ä¼˜**ï¼‰

ç¼ºç‚¹ï¼šéœ€è¦æå‰çŸ¥é“ä½œä¸šæ‰§è¡Œæ—¶é—´ï¼›å®¹æ˜“â€œé¥¿æ­»â€é•¿ä½œä¸š
### æŠ¢å å¼è°ƒåº¦
CPU ä½¿ç”¨æƒå¯ä»¥åœ¨è¿›ç¨‹ä¹‹é—´è¢«æ‰“æ–­ã€æŠ¢å ï¼Œè°ƒåº¦å™¨æ ¹æ®ç­–ç•¥å†³å®šè°è¯¥è¿è¡Œã€‚

1. æœ€çŸ­å‰©ä½™æ—¶é—´ä¼˜å…ˆ-SRTF

SJF çš„æŠ¢å å¼ç‰ˆæœ¬

æ–°æ¥çš„ä½œä¸šå¦‚æœæ¯”å½“å‰å‰©ä½™æ—¶é—´æ›´çŸ­ï¼Œå°±æŠ¢å  CPU

é€‚ç”¨äºçŸ­ä½œä¸šä¼˜å…ˆç³»ç»Ÿ

2. æ—¶é—´ç‰‡è½®è½¬-RR

ç»™æ¯ä¸ªè¿›ç¨‹åˆ†é…ä¸€ä¸ªå›ºå®šæ—¶é—´ç‰‡ï¼Œæ¯”å¦‚ 100ms

æ—¶é—´åˆ°å°±åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªè¿›ç¨‹

ä¼˜ç‚¹ï¼šå…¬å¹³ï¼Œé€‚åˆäº¤äº’å¼ç³»ç»Ÿ

ç¼ºç‚¹ï¼šé¢‘ç¹åˆ‡æ¢ä¼šå¢åŠ ä¸Šä¸‹æ–‡å¼€é”€

é€‚ç”¨äºå¤šä»»åŠ¡äº¤äº’ç³»ç»Ÿ

3. ä¼˜å…ˆçº§è°ƒåº¦

æŒ‰ä¼˜å…ˆçº§é«˜ä½æ‰§è¡Œï¼Œä¼˜å…ˆçº§é«˜çš„è¿›ç¨‹å…ˆæ‰§è¡Œ

å¯é…åˆæŠ¢å æˆ–éæŠ¢å ä½¿ç”¨

ç¼ºç‚¹ï¼šå¯èƒ½å¯¼è‡´ä½ä¼˜å…ˆçº§è¿›ç¨‹é¥¿æ­»

é€‚ç”¨äºå®æ—¶æˆ–ä¼˜å…ˆæ§åˆ¶ç³»ç»Ÿ

ğŸ‘‰ é€šå¸¸ä¼šå¼•å…¥ä¼˜å…ˆçº§è€åŒ–ï¼ˆAgingï¼‰æœºåˆ¶æ¥ç¼“è§£ï¼šéšç€ç­‰å¾…æ—¶é—´å¢åŠ ï¼Œè¿›ç¨‹ä¼˜å…ˆçº§ä¸Šå‡

4. å¤šçº§é˜Ÿåˆ—è°ƒåº¦

ä¸åŒç±»å‹çš„ä½œä¸šè¿›å…¥ä¸åŒçš„é˜Ÿåˆ—ï¼ˆå¦‚äº¤äº’å‹ vs æ‰¹å¤„ç†å‹ï¼‰

æ¯ä¸ªé˜Ÿåˆ—æœ‰è‡ªå·±çš„è°ƒåº¦ç®—æ³•

é˜Ÿåˆ—ä¹‹é—´æœ‰è°ƒåº¦ä¼˜å…ˆçº§

é€‚ç”¨äºå¤šç±»å‹ä½œä¸šç³»ç»Ÿ

5. å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦

æœ€å¤æ‚ä¹Ÿæ˜¯æœ€çµæ´»çš„è°ƒåº¦

è¿›ç¨‹å¯åœ¨ä¸åŒä¼˜å…ˆçº§é˜Ÿåˆ—ä¹‹é—´åŠ¨æ€ç§»åŠ¨

æ–°è¿›ç¨‹ä¼˜å…ˆçº§é«˜ï¼Œé•¿æ—¶é—´è¿è¡Œè¿›ç¨‹é€æ­¥é™ä½ä¼˜å…ˆçº§

å¾ˆé€‚åˆç°ä»£é€šç”¨æ“ä½œç³»ç»Ÿï¼ˆæ¯”å¦‚ Linuxï¼‰
